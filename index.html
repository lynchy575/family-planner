<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Family Planner</title>
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet" />
<style>
body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; margin: 0; }
#calendar { max-width: 1100px; margin: 24px auto; padding: 0 16px; }
.fc .fc-toolbar-title { font-size: 1.25rem; }
</style>
</head>
<body>
<div id="calendar"></div>


<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>
<script>
const FEED_URL = 'https://script.google.com/macros/s/AKfycbzC74vunpbgzQMcBE7IXYf1twhbd9fat2p9rabFbCeAURpS87iimbCZGsOJhex2auT8/exec?format=json';


  document.addEventListener('DOMContentLoaded', function() {
    const el = document.getElementById('calendar');
    const calendar = new FullCalendar.Calendar(el, {
      initialView: 'dayGridMonth',
      headerToolbar: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,timeGridWeek,listWeek'
      },

      // ðŸ‘‰ Add these bits for time display
      displayEventTime: true,
      displayEventEnd: true,
      eventTimeFormat: { hour: 'numeric', minute: '2-digit', meridiem: 'short' },
      eventContent(info) {
        const time = info.timeText ? info.timeText + ' ' : '';
        return { html: `<span>${time}${info.event.title}</span>` };
      },

      // ðŸ‘‰ Keep your existing parts
      events: async function(fetchInfo, success, failure) {
        try {
          const url = new URL(FEED_URL);
          url.searchParams.set('start', fetchInfo.startStr);
          url.searchParams.set('end', fetchInfo.endStr);
          url.searchParams.set('v', Date.now()); // bust cache so colours update
          const res = await fetch(url);
          const data = await res.json();
          const fcEvents = data.map(e => ({
            id: e.id,
            title: e.title,
            start: e.start,
            end: e.end || null,
            allDay: !!e.allDay,
            extendedProps: {
              person: e.person,
              type: e.type,
              location: e.location,
              notes: e.notes,
              color: e.color
            }
          }));
          success(fcEvents);
        } catch (err) {
          console.error(err);
          failure(err);
        }
      },

      eventDidMount: function(info) {
        info.el.style.borderColor = info.event.extendedProps.color;
        info.el.style.backgroundColor = info.event.extendedProps.color;
        info.el.style.color = '#000';
      },

      eventClick: function(info) {
        const e = info.event.extendedProps;
        const parts = [
          `Who: ${e.person || 'â€”'}`,
          `Type: ${e.type || 'â€”'}`,
          `Location: ${e.location || 'â€”'}`,
          e.notes ? `Notes: ${e.notes}` : ''
        ].filter(Boolean).join('\n');
        alert(info.event.title + '\n\n' + parts);
      }
    });
    calendar.render();
  });
events: async function(fetchInfo, success, failure) {
try {
const url = new URL(FEED_URL);
url.searchParams.set('start', fetchInfo.startStr);
url.searchParams.set('end', fetchInfo.endStr);
const res = await fetch(url);
const data = await res.json();
const fcEvents = data.map(e => ({
id: e.id,
title: e.title,
start: e.start,
end: e.end || null,
allDay: !!e.allDay,
extendedProps: { person: e.person, type: e.type, location: e.location, notes: e.notes, color: e.color }
}));
success(fcEvents);
} catch (err) {
console.error(err);
failure(err);
}
},
eventClick: function(info) {
const e = info.event.extendedProps;
const parts = [
`Who: ${e.person || 'â€”'}`,
`Type: ${e.type || 'â€”'}`,
`Location: ${e.location || 'â€”'}`,
e.notes ? `Notes: ${e.notes}` : ''
].filter(Boolean).join('\n');
alert(info.event.title + '\n\n' + parts);
}
});
calendar.render();
});
</script>
</body>
</html>
